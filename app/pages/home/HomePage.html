<ion-navbar *navbar primary>
    <ion-searchbar *ngIf="searching" [(ngModel)]="searchQuery" (input)="searchAddress(searchQuery)"
                   placeholder="Enter Your Address" (cancel)="searching = false"></ion-searchbar>
    <ion-title *ngIf="!searching">
        <img src="img/rollout_logo.png" style="margin-top:5px;" height="30" width="143">
    </ion-title>
    <ion-buttons end *ngIf="!searching">
        <button side="secondary" (click)="showFilterBar()">
            <ion-icon white name="pin"></ion-icon>
        </button>
    </ion-buttons>
</ion-navbar>
<ion-content class="home">
    <div *ngIf="addresses" class="address-search-results">
        <ion-list>
            <ion-item *ngIf="!addresses.length">
                Address Not Found :(
            </ion-item>
            <ion-item *ngFor="let address of addresses" (click)="selectAddress(address)">
                {{address.text}}
            </ion-item>
        </ion-list>
    </div>
    <div class="error-message" *ngIf="errorMessage">
        {{errorMessage}}
    </div>
    <div class="no-schedule" *ngIf="!loading && events.length == 0">
        <h1>No Schedule Found</h1>
        Rollout! is only available for the City of Houston.
        <br>
        Try again when you are in the city or in an area with trash pickup!
        <br>
        <br>
        Think this is a mistake? <a href="mailto:info@rollouthouston.com">Let us know</a>
        <br>
        <br>
        <!-- because we care -->
        <a white (click)="showFilterBar()">Click the
            <ion-icon name="pin"></ion-icon>
            to change your
            location</a>
    </div>
    <div class="schedule">
        <div *ngFor="let event of events" class="upcoming-event">
            <h2>{{event.day | relativeDate}}</h2>
            <div *ngIf="event.possibleHoliday" class="possible-holiday">
                <i class="ion-android-warning"></i>
                Hey! This might be a holiday. <br>
                Check our <a ng-click="openHolidaySchedule()" href="#">holiday schedule</a> to make sure.
            </div>
            <ul class="waste-types">
                <li *ngFor="let category of event.categories" class="waste-type">
                    <div *ngIf="category == 'waste'">
                        <ion-icon name="trash" (click)="goToWasteDescription()"></ion-icon>
                        <label>Trash & Lawn</label>
                        <div class="when">Every {{pickupDays.wasteDay | dayOfWeek}}</div>
                    </div>
                    <div *ngIf="category == 'recycling'">
                        <i class="fa fa-recycle" (click)="goToWasteDescription()"></i>
                        <label>Recycling</label>
                        <div class="when">Every Other {{pickupDays.recyclingDay | dayOfWeek}}</div>
                    </div>
                    <div *ngIf="category == 'junk'">
                        <img class="icon icons8-Weight"
                             src="img/Weight-100.png"
                             width="75" height="75"
                             (click)="goToWasteDescription()">
                        <label>Junk</label>
                        <div class="when">{{moment().date(pickupDays.junkWeekOfMonth).format("Do")}}
                            {{pickupDays.junkDay | dayOfWeek}} (Even Months)
                        </div>
                    </div>

                    <div *ngIf="category == 'tree'">
                        <i class="fa fa-tree" (click)="goToWasteDescription()"></i>
                        <label>Tree Waste</label>
                        <div class="when">{{moment().date(pickupDays.junkWeekOfMonth).format("Do")}}
                            {{pickupDays.junkDay | dayOfWeek}} (Odd Months)
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <ion-fixed class="bottom-actions">
        <button (click)="goToRemindMe()">
            <ion-icon name="notifications"></ion-icon>
            Remind Me
        </button>
    </ion-fixed>
</ion-content>
